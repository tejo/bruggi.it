{% extends "base.html" %}

{% block content %}
    <section class="relative w-full">
      <div class="w-full px-4 py-6 md:px-40 md:py-10 flex justify-center bg-white dark:bg-background-dark">
        <div
          id="hero-slideshow"
          class="max-w-[1280px] flex-1 rounded-2xl overflow-hidden relative min-h-[560px] flex flex-col items-center justify-center text-center p-8 bg-cover bg-center"
          data-alt="Panoramic view of Italian Alps"
          data-slides='[{% for img in t.Hero.Images %}"{{ img }}"{% if not forloop.Last %}, {% endif %}{% endfor %}]'
          style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.5)), url('{{ t.Hero.Images.0 }}');">
          <div class="max-w-2xl flex flex-col gap-6 animate-fade-in-up relative z-10">
            <h1 class="text-white text-5xl md:text-7xl font-black leading-tight tracking-tight drop-shadow-md">
              {{ t.Hero.Title }}
            </h1>
            <h2 class="text-white text-lg md:text-xl font-medium leading-relaxed drop-shadow-sm opacity-90">
              {{ t.Hero.Subtitle }}
            </h2>
            <div class="flex justify-center pt-4">
              <a href="#itinerari"
                class="flex items-center gap-2 rounded-lg h-12 px-8 bg-primary text-[#111811] text-base font-bold hover:bg-green-500 hover:scale-105 transition-all shadow-lg">
                {{ t.Hero.CTA }}
                <span class="material-symbols-outlined text-sm">arrow_downward</span>
              </a>
            </div>
          </div>
        </div>
      </div>
      <script src="/static/js/slideshow.js" defer></script>
    </section>

    {% if t.AugustEvents.Enabled %}
    <section class="py-12 px-4 md:px-40 bg-white dark:bg-[#0c1a0c] border-b border-[#f0f4f0] dark:border-gray-800">
      <div class="max-w-[960px] mx-auto flex flex-col gap-8">
        <div class="flex items-center gap-3">
          <span class="material-symbols-outlined text-primary text-3xl">event</span>
          <h2 class="text-[#111811] dark:text-white text-3xl font-black tracking-tight">{{ t.AugustEvents.Title }}</h2>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
          {% for item in t.AugustEvents.Items %}
          <div class="flex flex-col gap-2 p-5 rounded-2xl bg-background-light dark:bg-[#1a2e1a] border border-[#e5e7eb] dark:border-gray-800 hover:border-primary transition-colors group">
            <div class="flex justify-between items-start mb-1">
              <span class="text-primary font-bold text-sm uppercase tracking-wide">{{ item.Date }}</span>
              <span class="text-gray-400 dark:text-gray-500 text-xs font-mono">{{ item.Time }}</span>
            </div>
            <h3 class="text-[#111811] dark:text-white font-bold text-lg leading-snug group-hover:text-primary transition-colors">
              {{ item.Name }}
            </h3>
          </div>
          {% endfor %}
        </div>
      </div>
    </section>
    {% endif %}

    <section class="py-16 px-4 md:px-40 bg-background-light dark:bg-background-dark">
      <div class="max-w-[960px] mx-auto flex flex-col gap-10">
        <div class="flex flex-col gap-2">
          <h2 class="text-[#111811] dark:text-white text-3xl font-bold leading-tight tracking-tight">{{ t.Welcome.Title }}
          </h2>
          <div class="h-1 w-20 bg-primary rounded-full"></div>
        </div>
        <div class="bg-white dark:bg-[#1a2e1a] p-6 rounded-2xl shadow-sm border border-[#e5e7eb] dark:border-gray-800">
          <div class="flex flex-col md:flex-row items-center gap-8">
            <div class="flex-1 flex flex-col gap-4">
              <div>
                <h3 class="text-[#111811] dark:text-white text-xl font-bold mb-2">{{ t.Welcome.Subtitle }}</h3>
                <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
                  {{ t.Welcome.Description }}
                </p>
              </div>
              <div class="flex flex-wrap gap-3 mt-2">
                <span
                  class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-green-100 text-green-800 text-sm font-medium">
                  <span class="material-symbols-outlined text-sm">landscape</span> {{ t.Welcome.Altitude }}
                </span>
                <span
                  class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-green-100 text-green-800 text-sm font-medium">
                  <span class="material-symbols-outlined text-sm">history_edu</span> {{ t.Welcome.Founded }}
                </span>
              </div>
              <a href="{{ base_url }}/itineraries.html" class="mt-4 flex items-center gap-2 text-primary font-bold text-sm hover:underline w-fit">
                {{ t.Welcome.CTAHistory }}
                <span class="material-symbols-outlined text-sm">arrow_forward</span>
              </a>
            </div>
            <div class="w-full md:w-1/2 aspect-video rounded-xl bg-cover bg-center shadow-md"
              data-alt="Close up of stone houses"
              style="background-image: url('{{ t.Welcome.Image }}');">
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="py-16 px-4 md:px-40 bg-white dark:bg-[#0c1a0c]" id="itinerari">
      <div class="max-w-[960px] mx-auto flex flex-col gap-10">
        <div class="flex flex-col md:flex-row justify-between items-end gap-4">
          <div class="flex flex-col gap-2">
            <h2 class="text-[#111811] dark:text-white text-3xl font-bold leading-tight tracking-tight">{{ t.Sections.ItinerariesTitle }}</h2>
            <p class="text-gray-500 dark:text-gray-400">{{ t.Sections.ItinerariesSubtitle }}</p>
          </div>
          <a href="{{ base_url }}/itineraries.html"
            class="hidden md:flex items-center gap-1 text-primary font-bold text-sm hover:bg-green-50 px-3 py-2 rounded-lg transition-colors">
            {{ t.Sections.SeeAllItineraries }}
            <span class="material-symbols-outlined text-sm">chevron_right</span>
          </a>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {% for item in itineraries %}
          <a href="{{ base_url }}/itineraries/{{ item.Slug }}.html" class="group flex flex-col bg-background-light dark:bg-[#1a2e1a] rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300">
            <div class="h-48 w-full bg-cover bg-center group-hover:scale-105 transition-transform duration-500"
              style="background-image: url('{{ item.Image }}');">
            </div>
            <div class="p-5 flex flex-col gap-3 flex-1">
              <div class="flex justify-between items-start">
                <h3 class="text-lg font-bold text-[#111811] dark:text-white group-hover:text-primary transition-colors">{{ item.Title }}</h3>
                <span class="bg-primary/20 text-green-700 dark:text-green-300 text-xs px-2 py-1 rounded font-bold">{{ item.Difficulty }}</span>
              </div>
              <p class="text-sm text-gray-600 dark:text-gray-300 line-clamp-2">{{ item.Description }}</p>
              <div class="pt-2 flex flex-wrap items-center text-sm font-medium text-gray-500 dark:text-gray-400 gap-4">
                <span class="flex items-center gap-1">
                  {% if item.Type == "hiking" %}
                    <span class="material-symbols-outlined text-base">hiking</span>
                  {% else %}
                    <span class="material-symbols-outlined text-base">directions_bike</span>
                  {% endif %}
                </span>
                <span class="flex items-center gap-1"><span class="material-symbols-outlined text-base">timer</span>
                  {{ item.Duration }}</span>
                <span class="flex items-center gap-1"><span class="material-symbols-outlined text-base">straighten</span>
                  {{ item.DistanceKM }}km</span>
              </div>
              <div class="mt-auto pt-4 flex items-center gap-1 text-primary font-bold text-sm">
                {{ t.Sections.ReadMore }}
                <span class="material-symbols-outlined text-xs">arrow_forward</span>
              </div>
            </div>
          </a>
          {% endfor %}
        </div>
        
        <a href="{{ base_url }}/itineraries.html"
          class="md:hidden w-full flex justify-center items-center gap-1 bg-white border border-gray-200 py-3 rounded-lg font-bold text-sm text-[#111811]">
          {{ t.Sections.SeeAllItineraries }}
        </a>
      </div>
    </section>

    <section class="py-16 px-4 md:px-40 bg-background-light dark:bg-background-dark" id="galleria">
      <div class="max-w-[960px] mx-auto flex flex-col gap-8">
        <div class="text-center md:text-left">
          <h2 class="text-[#111811] dark:text-white text-3xl font-bold leading-tight tracking-tight">{{ t.Sections.GalleryTitle }}</h2>
          <p class="text-gray-500 dark:text-gray-400 mt-2">{{ t.Sections.GallerySubtitle }}</p>
        </div>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 auto-rows-[200px]">
          {% for img in gallery_images %}
            {% if forloop.First %}
            <div class="col-span-2 row-span-2 rounded-xl overflow-hidden relative group lightbox-trigger cursor-pointer" data-src="{{ img.Url }}" data-alt="{{ img.Alt }}" {% if img.Author %}data-author="{{ img.Author }}"{% endif %}>
              <div class="absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110"
                style="background-image: url('{{ img.Url }}');">
              </div>
              <div class="absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-colors"></div>
              {% if img.Author %}
              <div class="absolute bottom-4 right-4 z-10 opacity-0 group-hover:opacity-100 transition-opacity" onclick="event.stopPropagation()">
                  <object>
                      <a href="https://instagram.com/{{ img.Author }}" target="_blank" rel="noopener noreferrer" class="bg-white/80 dark:bg-black/60 backdrop-blur-sm px-2 py-1 rounded text-xs font-bold hover:bg-white text-black dark:text-white flex items-center gap-1">
                          @{{ img.Author }}
                      </a>
                  </object>
              </div>
              {% endif %}
            </div>
            {% else %}
            <div class="rounded-xl overflow-hidden relative group lightbox-trigger cursor-pointer" data-src="{{ img.Url }}" data-alt="{{ img.Alt }}" {% if img.Author %}data-author="{{ img.Author }}"{% endif %}>
              <div class="absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110"
                style="background-image: url('{{ img.Url }}');">
              </div>
              {% if img.Author %}
              <div class="absolute bottom-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity" onclick="event.stopPropagation()">
                  <object>
                      <a href="https://instagram.com/{{ img.Author }}" target="_blank" rel="noopener noreferrer" class="bg-white/80 dark:bg-black/60 backdrop-blur-sm px-2 py-1 rounded text-xs font-bold hover:bg-white text-black dark:text-white flex items-center gap-1">
                          @{{ img.Author }}
                      </a>
                  </object>
              </div>
              {% endif %}
            </div>
            {% endif %}
          {% endfor %}
          
          <div
            class="rounded-xl overflow-hidden relative group flex items-center justify-center bg-primary/10 cursor-pointer hover:bg-primary/20 transition-colors">
            <a href="{{ base_url }}/galleries.html" class="flex flex-col items-center gap-2 text-primary">
              <span class="material-symbols-outlined text-3xl">photo_library</span>
              <span class="font-bold text-sm">{{ t.Sections.SeeAllGallery }}</span>
            </a>
          </div>
        </div>
      </div>
    </section>
{% endblock %}
